

name: hf_model_download


on:
  workflow_dispatch:
    inputs:
      repo_id:
        description: 'hf_repo_id'
        required: true
        type: string


jobs:
  
  download:
    
    runs-on: ubuntu-latest
    steps:
      - name: checkout
        uses: actions/checkout@v4
      - name: Setup Python
        uses: actions/setup-python@v5
        with:
          python-version: '3.10'
      - name: Install huggingface_hub
        run: pip install -U huggingface_hub

      - name: download_model
        run: |
          python - <<'PY'
          import os
          from huggingface_hub import snapshot_download
          repo_id = "${{ inputs.repo_id }}"
          local_dir = f"models/{repo_id.replace('/', '_')}"
          snapshot_download(repo_id=repo_id, local_dir=local_dir, local_dir_use_symlinks=False)
          PY
      - name: Upload artiface
        uses: actions/upload-artifact@v4
        with:
          name: ${{ input.repo_id }}
          path: models/
